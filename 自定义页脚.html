<!doctype html>
<!-- 外链跳转 -->
<script>
    document.addEventListener('click', event => {
        let t = event.target;
        if (t.matches('.Post-body a')) {
            let url = new URL(t.href);
            if (url.origin == document.location.origin) {
                t.removeAttribute('target');
                t.removeAttribute('rel');
            }else{
                t.setAttribute('target', '_blank');
            }
        }
    }, false);
</script>

<!-- 百度站长 -->
<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

<script>
    window.onload = function () {
        $('.Afrux-NewsWidget-line').each((i, item) => {
            let match = item.innerHTML.match('[a-zA-z]+://[^\s]*');
            if (math) {
                $(item).html(`<a href="${match.input.substring(match.index)}" style="display:flex;align-items:center;">${match.input.substring(0, match.index).trim()} <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>`)
            }
        })
    }
</script>

<!-- 页脚 -->
<footer>
    <div class="site-footer">
        <div style="color: rgb(137, 137, 140);font-size:0.9em;" class="footer-container rm-link-color">
            <p>
                <!-- 加载时间 -->
                <script>
                    var start_time = new Date();
                    var end_time = "";
                    var loadt = setInterval(function () {
                        if (document.readyState == "complete") {
                            showLoadTime();
                        }
                    }, 500)

                    function showLoadTime() {
                        end_time = new Date();
                        loadtime_span.innerHTML = "T " + (end_time.getTime() - start_time.getTime()) + " ms";
                        clearInterval(loadt);
                    }
                </script>
                <!-- IP -->
				<span id="ip_span" align=center></span>
                <script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>
                <script type="text/javascript">
                    ip_span.innerHTML = returnCitySN["cname"] + " " + returnCitySN["cip"];
                </script>

                <span class="mx-2">|</span>

                <span id="loadtime_span">T</span>

                <span class="mx-2">|</span>

                <a id="stats" href="https://stats.uptimerobot.com/QAL8xc6m8y" target="_blank"></a>

            </p>
            <p>
                <a id="prot_span" href="https://discuss.flarum.org.cn/docs/protocol.html"></a>

                <span class="mx-2">|</span>

                <a id="rept_span" href="mailto:flarumcn@qq.com"></a>

                <span class="mx-2">|</span>

                <span id="ver_span"></span>
				<p id="right_span"></p>
            </p>
            <!-- 声明 -->
            <script type="text/javascript">
                var site_version = "1.1.0";
                var lang = document.getElementsByTagName("html");
                var userLang = lang[0].getAttribute("lang");
                if (userLang.includes("zh")) {
					stats.innerHTML = "状态";
                    prot_span.innerHTML = "社区规范";
                    rept_span.innerHTML = "违法和不良信息举报";
                    ver_span.innerHTML = "版本 " + site_version;
                    right_span.innerHTML = "本站独立于 Flarum 基金会运行。<a href=\"https://flarum.org/verified-communities\"><i class=\"fas fa-info-circle\"></i> 了解官方认证社区</a>";
                }
                else {
					stats.innerHTML = "Status";
                    prot_span.innerHTML = "Protocol";
                    rept_span.innerHTML = "Report";
                    ver_span.innerHTML = "Version " + site_version;
                   right_span.innerHTML = "This site operates independently of the Flarum Foundation. Read more about <a href=\"https://flarum.org/verified-communities\"><i class=\"fas fa-info-circle\"></i> verified communities</a>.";
                }
            </script>
        </div>
    </div>
    <div id="flyfish" class="fly-fish" height="200"></div>
</footer>

<script src="/fish.js"></script>
